<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>INHILCARGO - Jasa Angkutan Tembilahan</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
    
    *{
      margin:0;
      padding:0;
      box-sizing:border-box;
    }
    
    body{
      font-family:'Inter',sans-serif;
      background:#0a0e27;
      min-height:100vh;
      display:flex;
      justify-content:center;
      align-items:center;
      padding:20px;
      position:relative;
      overflow-x:hidden;
    }
    
    body::before{
      content:'';
      position:fixed;
      top:0;left:0;right:0;bottom:0;
      background:radial-gradient(circle at 20% 50%, rgba(120,119,198,0.15), transparent 40%),
                 radial-gradient(circle at 80% 80%, rgba(236,72,153,0.15), transparent 40%),
                 radial-gradient(circle at 40% 20%, rgba(59,130,246,0.15), transparent 40%);
      z-index:0;
      animation:gradientShift 15s ease infinite;
    }
    
    @keyframes gradientShift{
      0%, 100%{opacity:0.5}
      50%{opacity:0.8}
    }
    
    body::after{
      content:'';
      position:fixed;
      top:0;left:0;right:0;bottom:0;
      background-image:
        linear-gradient(rgba(255,255,255,0.03) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255,255,255,0.03) 1px, transparent 1px);
      background-size:50px 50px;
      z-index:0;
    }
    
    .container{
      background:rgba(15,23,42,0.95);
      backdrop-filter:blur(20px);
      padding:40px;
      border-radius:32px;
      border:1px solid rgba(255,255,255,0.1);
      box-shadow:0 25px 80px rgba(0,0,0,0.5),
                 inset 0 1px 0 rgba(255,255,255,0.1);
      width:100%;
      max-width:650px;
      position:relative;
      z-index:1;
      animation:slideUp 0.6s cubic-bezier(0.16,1,0.3,1);
    }
    
    @keyframes slideUp{
      from{opacity:0;transform:translateY(40px)}
      to{opacity:1;transform:translateY(0)}
    }
    
    .header{
      text-align:center;
      margin-bottom:40px;
      position:relative;
    }
    
    .logo-container{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      width:90px;
      height:90px;
      background:#020617;
      border-radius:999px;
      margin-bottom:18px;
      box-shadow:0 12px 40px rgba(0,0,0,0.7);
      border:1px solid rgba(250,204,21,0.5);
      animation:float 3s ease-in-out infinite;
    }
    
    @keyframes float{
      0%,100%{transform:translateY(0)}
      50%{transform:translateY(-10px)}
    }
    
    .logo-img{
      max-width:70%;
      max-height:70%;
      object-fit:contain;
      filter:drop-shadow(0 4px 10px rgba(0,0,0,0.6));
    }
    
    h1{
      font-size:2.2rem;
      font-weight:800;
      margin-bottom:8px;
      color:#facc6b; /* emas */
      letter-spacing:0.08em;
      text-transform:uppercase;
      text-shadow:0 0 18px rgba(250,204,21,0.35);
    }
    
    .subtitle{
      color:rgba(226,232,240,0.75);
      font-size:0.8rem;
      font-weight:500;
      letter-spacing:0.15em;
      text-transform:uppercase;
    }
    
    .form-section{
      animation:fadeIn 0.6s ease-out backwards;
    }
    
    @keyframes fadeIn{
      from{opacity:0;transform:translateY(20px)}
      to{opacity:1;transform:translateY(0)}
    }
    
    .form-group{
      margin-bottom:20px;
    }
    
    .form-group:nth-child(1){animation-delay:0.1s}
    .form-group:nth-child(2){animation-delay:0.15s}
    .form-group:nth-child(3){animation-delay:0.2s}
    .form-group:nth-child(4){animation-delay:0.25s}
    
    label{
      display:flex;
      align-items:center;
      gap:10px;
      font-weight:600;
      margin-bottom:10px;
      color:rgba(255,255,255,0.9);
      font-size:0.95rem;
    }
    
    .label-icon{
      font-size:1.3rem;
      filter:grayscale(0.2);
    }
    
    select,input{
      width:100%;
      padding:14px 18px;
      border-radius:16px;
      border:1px solid rgba(255,255,255,0.1);
      font-size:1rem;
      background:rgba(30,41,59,0.5);
      color:#fff;
      transition:all 0.3s cubic-bezier(0.4,0,0.2,1);
      cursor:pointer;
      font-family:inherit;
    }
    
    select:focus,input:focus{
      outline:none;
      border-color:#667eea;
      background:rgba(30,41,59,0.8);
      box-shadow:0 0 0 4px rgba(102,126,234,0.15);
      transform:translateY(-2px);
    }
    
    select:hover,input:hover{
      border-color:rgba(102,126,234,0.5);
      background:rgba(30,41,59,0.7);
    }
    
    select option{
      background:#1e293b;
      color:#fff;
    }
    
    .grid{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:16px;
      margin-bottom:20px;
    }
    
    button{
      width:100%;
      padding:16px;
      border-radius:16px;
      border:none;
      font-size:1.05rem;
      font-weight:700;
      cursor:pointer;
      transition:all 0.3s cubic-bezier(0.4,0,0.2,1);
      position:relative;
      overflow:hidden;
      font-family:inherit;
    }
    
    button::before{
      content:'';
      position:absolute;
      top:50%;
      left:50%;
      width:0;
      height:0;
      border-radius:50%;
      background:rgba(255,255,255,0.2);
      transform:translate(-50%,-50%);
      transition:width 0.6s,height 0.6s;
    }
    
    button:hover::before{
      width:400px;
      height:400px;
    }
    
    .btn-primary{
      background:linear-gradient(135deg,#667eea,#764ba2);
      color:#fff;
      margin-top:10px;
      box-shadow:0 10px 30px rgba(102,126,234,0.3);
    }
    
    .btn-primary:hover{
      transform:translateY(-3px);
      box-shadow:0 15px 40px rgba(102,126,234,0.4);
    }
    
    .btn-primary:active{
      transform:translateY(-1px);
    }
    
    .btn-wa{
      background:linear-gradient(135deg,#25D366,#1ebe5d);
      color:#fff;
      box-shadow:0 10px 30px rgba(37,211,102,0.3);
    }
    
    .btn-wa:hover{
      transform:translateY(-3px);
      box-shadow:0 15px 40px rgba(37,211,102,0.4);
    }
    
    .loading{
      display:none;
      text-align:center;
      padding:30px;
      animation:fadeIn 0.3s;
    }
    
    .spinner{
      border:4px solid rgba(102,126,234,0.2);
      border-top:4px solid #667eea;
      border-radius:50%;
      width:50px;
      height:50px;
      animation:spin 1s linear infinite;
      margin:0 auto 15px;
    }
    
    @keyframes spin{
      0%{transform:rotate(0deg)}
      100%{transform:rotate(360deg)}
    }
    
    .loading p{
      color:rgba(255,255,255,0.7);
      font-size:0.95rem;
    }
    
    .result{
      margin-top:30px;
      background:rgba(30,41,59,0.5);
      backdrop-filter:blur(10px);
      padding:28px;
      border-radius:24px;
      border:1px solid rgba(255,255,255,0.1);
      animation:slideDown 0.4s cubic-bezier(0.16,1,0.3,1);
    }
    
    @keyframes slideDown{
      from{opacity:0;transform:translateY(-20px)}
      to{opacity:1;transform:translateY(0)}
    }
    
    .breakdown>strong{
      display:block;
      font-size:1.3rem;
      margin-bottom:20px;
      color:#fff;
      font-weight:700;
    }
    
    .info-box{
      background:rgba(102,126,234,0.1);
      padding:18px;
      border-radius:16px;
      margin:15px 0;
      border-left:4px solid #667eea;
      line-height:1.8;
    }
    
    .info-box strong{
      color:rgba(255,255,255,0.9);
    }
    
    .info-box>div{
      color:rgba(255,255,255,0.8);
      margin-bottom:8px;
    }
    
    .info-box>div:last-child{
      margin-bottom:0;
    }
    
    .badge{
      display:inline-block;
      background:linear-gradient(135deg,#667eea,#764ba2);
      color:#fff;
      border-radius:999px;
      padding:5px 14px;
      font-size:0.85rem;
      font-weight:600;
      margin-left:8px;
      box-shadow:0 4px 12px rgba(102,126,234,0.3);
    }
    
    .price-range{
      background:linear-gradient(135deg,rgba(102,126,234,0.15),rgba(118,75,162,0.15));
      border:1px solid rgba(102,126,234,0.3);
      padding:20px;
      border-radius:16px;
      margin:15px 0;
    }
    
    .price-range-header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      margin-bottom:12px;
    }
    
    .price-range-label{
      color:rgba(255,255,255,0.7);
      font-size:0.9rem;
      font-weight:500;
    }
    
    .price-main{
      font-size:1.8rem;
      font-weight:800;
      background:linear-gradient(135deg,#667eea,#f093fb);
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
      background-clip:text;
      display:flex;
      align-items:center;
      gap:10px;
    }
    
    .price-note{
      color:rgba(255,255,255,0.5);
      font-size:0.85rem;
      margin-top:8px;
      line-height:1.5;
    }
    
    .list{
      margin:15px 0;
      padding:0;
      list-style:none;
    }
    
    .list li{
      display:flex;
      justify-content:space-between;
      align-items:center;
      padding:12px 0;
      border-bottom:1px dashed rgba(255,255,255,0.1);
      color:rgba(255,255,255,0.8);
    }
    
    .list li:last-child{border:none}
    
    .list li strong{
      color:#fff;
    }
    
    .estimate-time{
      display:inline-flex;
      align-items:center;
      gap:8px;
      background:rgba(59,130,246,0.15);
      color:#60a5fa;
      padding:8px 14px;
      border-radius:12px;
      font-size:0.9rem;
      font-weight:600;
      border:1px solid rgba(59,130,246,0.3);
    }
    
    .actions-inline{
      display:flex;
      flex-direction:column;
      gap:12px;
      margin-top:20px;
    }
    
    .tips{
      margin-top:30px;
      padding:20px;
      background:rgba(245,158,11,0.1);
      border-radius:16px;
      border-left:4px solid #f59e0b;
      line-height:1.6;
    }
    
    .tips strong{
      color:#fbbf24;
      display:block;
      margin-bottom:8px;
      font-size:1.05rem;
    }
    
    .tips p{
      color:rgba(255,255,255,0.7);
      font-size:0.9rem;
    }
    
    .muted{
      color:rgba(255,255,255,0.4);
      font-size:0.85rem;
      text-align:center;
      margin-top:20px;
      padding:16px;
      background:rgba(255,255,255,0.03);
      border-radius:12px;
      line-height:1.5;
    }
    
    .modal{
      display:none;
      position:fixed;
      top:0;left:0;right:0;bottom:0;
      background:rgba(0,0,0,0.85);
      backdrop-filter:blur(10px);
      z-index:1000;
      justify-content:center;
      align-items:center;
      padding:20px;
      animation:fadeIn 0.3s;
    }
    
    .modal.active{display:flex}
    
    .modal-content{
      background:rgba(15,23,42,0.98);
      backdrop-filter:blur(20px);
      border-radius:28px;
      padding:32px;
      max-width:550px;
      width:100%;
      max-height:90vh;
      overflow-y:auto;
      box-shadow:0 25px 80px rgba(0,0,0,0.6);
      border:1px solid rgba(255,255,255,0.1);
      animation:slideUp 0.4s cubic-bezier(0.16,1,0.3,1);
      position:relative;
    }
    
    .modal-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:24px;
      padding-bottom:20px;
      border-bottom:1px solid rgba(255,255,255,0.1);
    }
    
    .modal-header h2{
      color:#fff;
      font-size:1.5rem;
      margin:0;
      font-weight:700;
    }
    
    .close-modal{
      background:rgba(239,68,68,0.1);
      border:1px solid rgba(239,68,68,0.3);
      font-size:1.5rem;
      cursor:pointer;
      color:#ef4444;
      width:36px;
      height:36px;
      padding:0;
      line-height:1;
      border-radius:10px;
      transition:all 0.3s;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    
    .close-modal:hover{
      background:rgba(239,68,68,0.2);
      transform:rotate(90deg);
    }
    
    .form-input{
      width:100%;
      padding:14px 18px;
      border-radius:16px;
      border:1px solid rgba(255,255,255,0.1);
      font-size:1rem;
      background:rgba(30,41,59,0.5);
      color:#fff;
      transition:all 0.3s;
      font-family:inherit;
    }
    
    .form-input::placeholder{
      color:rgba(255,255,255,0.4);
    }
    
    .form-input:focus{
      outline:none;
      border-color:#667eea;
      background:rgba(30,41,59,0.8);
      box-shadow:0 0 0 4px rgba(102,126,234,0.15);
    }
    
    textarea.form-input{
      resize:vertical;
      min-height:90px;
    }
    
    .order-summary{
      background:linear-gradient(135deg,rgba(102,126,234,0.15),rgba(118,75,162,0.15));
      padding:20px;
      border-radius:16px;
      margin-bottom:24px;
      border:1px solid rgba(102,126,234,0.3);
    }
    
    .order-summary-title{
      font-weight:700;
      margin-bottom:14px;
      color:#fff;
      font-size:1.1rem;
    }
    
    .order-summary-item{
      display:flex;
      justify-content:space-between;
      align-items:center;
      padding:8px 0;
      font-size:0.95rem;
      color:rgba(255,255,255,0.8);
    }
    
    .order-summary-item strong{
      color:#fff;
    }
    
    .error-box{
      background:rgba(239,68,68,0.1);
      border:1px solid rgba(239,68,68,0.3);
      border-left:4px solid #ef4444;
      padding:24px;
      border-radius:16px;
      text-align:center;
    }
    
    .error-icon{
      font-size:3.5rem;
      margin-bottom:16px;
      opacity:0.9;
    }
    
    .error-box h3{
      color:#ef4444;
      margin-bottom:12px;
      font-size:1.2rem;
    }
    
    .error-box p{
      color:rgba(255,255,255,0.7);
      margin-bottom:12px;
      line-height:1.6;
    }
    
    @media(max-width:640px){
      .container{padding:24px}
      h1{font-size:1.8rem}
      .grid{grid-template-columns:1fr}
      .modal-content{padding:24px}
      .price-main{font-size:1.5rem}
    }
    
    ::-webkit-scrollbar{width:8px}
    ::-webkit-scrollbar-track{background:rgba(30,41,59,0.5)}
    ::-webkit-scrollbar-thumb{background:rgba(102,126,234,0.5);border-radius:4px}
    ::-webkit-scrollbar-thumb:hover{background:rgba(102,126,234,0.7)}
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="logo-container">
        <!-- logo/logo.png akan Anda simpan di folder "logo" -->
        <img src="logo.png" alt="INHIL CARGO" class="logo-img">
      </div>
      <h1>INHIL CARGO</h1>
      <p class="subtitle">Layanan Angkutan Premium Tembilahan</p>
    </div>

    <div class="form-section">
      <div class="form-group">
        <label for="armada"><span class="label-icon">üöõ</span> Pilih Armada</label>
        <select id="armada" onchange="updateForm()">
          <option value="">Pilih Armada</option>
          <option value="viar">VIAR</option>
          <option value="pickup">PICKUP</option>
        </select>
      </div>

      <div class="form-group">
        <label for="jenis"><span class="label-icon">üì¶</span> Jenis Angkutan</label>
        <select id="jenis" onchange="updateForm()">
          <option value="">Pilih Jenis Angkutan</option>
          <option value="pindahan">Pindahan Rumah/Kos</option>
          <option value="barang">Pengiriman Barang</option>
        </select>
      </div>

      <div class="grid">
        <div class="form-group">
          <label for="jemput"><span class="label-icon">üìç</span> Titik Jemput</label>
          <select id="jemput" onchange="updateForm()">
            <option value="">Pilih Jemput</option>
            <option value="tembilahan">Tembilahan</option>
            <option value="telukpinang">Teluk Pinang</option>
            <option value="tempuling">Tempuling</option>
            <option value="rumbai">Rumbai</option>
            <option value="kempas">Kempas</option>
            <option value="inhu">INHU (Rengat & Sekitar)</option>
            <option value="pekanbaru">PEKANBARU</option>
          </select>
        </div>
        <div class="form-group">
          <label for="tujuan"><span class="label-icon">üéØ</span> Tujuan</label>
          <select id="tujuan" onchange="updateForm()">
            <option value="">Pilih Tujuan</option>
            <option value="tembilahan">Tembilahan</option>
            <option value="telukpinang">Teluk Pinang</option>
            <option value="tempuling">Tempuling</option>
            <option value="rumbai">Rumbai</option>
            <option value="kempas">Kempas</option>
            <option value="inhu">INHU (Rengat & Sekitar)</option>
            <option value="pekanbaru">PEKANBARU</option>
          </select>
        </div>
      </div>

      <div class="form-group">
        <label for="crew"><span class="label-icon">üë∑</span> Muat & Bongkar</label>
        <select id="crew">
          <option value="0">Muat Bongkar Sendiri</option>
          <option value="50000">1 Orang Tenaga Buruh (bantu muat & bongkar)</option>
          <option value="100000">2 Orang Tenaga Buruh (terima beres)</option>
        </select>
      </div>

      <button class="btn-primary" onclick="hitung()">
        <span style="position:relative;z-index:1">üßÆ Hitung Perkiraan Biaya</span>
      </button>
    </div>

    <div class="loading" id="loading">
      <div class="spinner"></div>
      <p>Menghitung tarif terbaik untuk Anda...</p>
    </div>

    <div id="hasil" class="result" style="display:none"></div>
    
    <div class="tips">
      <strong>üí° Informasi Penting</strong>
      <p>Harga dapat bervariasi tergantung pada jenis barang (pecah belah, furniture besar, elektronik) dan kondisi akses jalan. Booking lebih awal untuk mendapat jadwal tetap!</p>
    </div>
    
    <p class="muted">*Range harga sudah termasuk faktor jenis barang dan kondisi akses jalan. Untuk perhitungan lebih akurat, mohon hubungi admin kami.</p>
  </div>

  <div class="modal" id="orderModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>üìã Data Pemesanan</h2>
        <button class="close-modal" onclick="closeModal()">√ó</button>
      </div>
      
      <div class="order-summary" id="modalSummary"></div>
      
      <div class="form-group">
        <label for="namaPemesan"><span class="label-icon">üë§</span> Nama Lengkap</label>
        <input type="text" id="namaPemesan" class="form-input" placeholder="Masukkan nama lengkap" required>
      </div>
      
      <div class="form-group">
        <label for="nohpPemesan"><span class="label-icon">üì±</span> Nomor HP/WhatsApp</label>
        <input type="tel" id="nohpPemesan" class="form-input" placeholder="Contoh: 08123456789" required>
      </div>
      
      <div class="form-group">
        <label for="alamatJemput"><span class="label-icon">üè†</span> Alamat Lengkap Jemput</label>
        <textarea id="alamatJemput" class="form-input" placeholder="Masukkan alamat lengkap penjemputan (Jalan, RT/RW, Patokan)" required></textarea>
      </div>
      
      <div class="form-group">
        <label for="alamatTujuan"><span class="label-icon">üìç</span> Alamat Lengkap Tujuan</label>
        <textarea id="alamatTujuan" class="form-input" placeholder="Masukkan alamat lengkap tujuan pengiriman" required></textarea>
      </div>
      
      <div class="form-group">
        <label for="tanggalJemput"><span class="label-icon">üìÖ</span> Tanggal & Jam Jemput</label>
        <input type="datetime-local" id="tanggalJemput" class="form-input" required>
      </div>
      
      <div class="form-group">
        <label for="catatanTambahan"><span class="label-icon">üìù</span> Catatan Tambahan (Opsional)</label>
        <textarea id="catatanTambahan" class="form-input" placeholder="Contoh: Barang pecah belah, butuh bantuan naik tangga, akses jalan sempit, dll"></textarea>
      </div>
      
      <button class="btn-wa" onclick="sendToWA()">
        <span style="position:relative;z-index:1">‚úÖ Kirim ke WhatsApp</span>
      </button>
    </div>
  </div>

  <script>
    const tarifPickup = {
      "tembilahan-tembilahan":{min:150000,max:200000},
      "tembilahan-tempuling":{min:300000,max:350000},
      "tempuling-tembilahan":{min:300000,max:350000},
      "tembilahan-rumbai":{min:350000,max:400000},
      "rumbai-tembilahan":{min:350000,max:400000},
      "tembilahan-kempas":{min:450000,max:500000},
      "kempas-tembilahan":{min:450000,max:500000},
      "tembilahan-inhu":{min:1000000,max:1200000},
      "inhu-tembilahan":{min:1000000,max:1200000},
      "tembilahan-telukpinang":{min:500000,max:600000},
      "telukpinang-tembilahan":{min:500000,max:600000},
      "tembilahan-pekanbaru":{min:2000000,max:2500000},
      "pekanbaru-tembilahan":{min:2000000,max:2500000},
    };

    const tarifViar = {
      "tembilahan-tembilahan":{min:100000,max:150000},
      "tembilahan-tempuling":{min:250000,max:300000},
      "tempuling-tembilahan":{min:250000,max:300000},
      "tembilahan-rumbai":{min:300000,max:350000},
      "rumbai-tembilahan":{min:300000,max:350000},
      "tembilahan-kempas":{min:400000,max:450000},
      "kempas-tembilahan":{min:400000,max:450000},
      "tembilahan-inhu":{min:900000,max:1100000},
      "inhu-tembilahan":{min:900000,max:1100000},
      "tembilahan-telukpinang":{min:450000,max:550000},
      "telukpinang-tembilahan":{min:450000,max:550000},
      "tembilahan-pekanbaru":{min:1800000,max:2300000},
      "pekanbaru-tembilahan":{min:1800000,max:2300000},
    };

    const lokasiLabel = {
      tembilahan: "Tembilahan",
      telukpinang: "Teluk Pinang",
      tempuling: "Tempuling",
      rumbai: "Rumbai",
      kempas: "Kempas",
      inhu: "INHU (Rengat & Sekitar)",
      pekanbaru: "Pekanbaru"
    };

    let lastCalculation = null;

    function formatRupiah(angka) {
      if (!angka && angka !== 0) return "-";
      return "Rp " + angka.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
    }

    function getTarif(armada, jemput, tujuan) {
      if (!armada || !jemput || !tujuan) return null;

      const key = `${jemput}-${tujuan}`;
      const tabel = armada === "pickup" ? tarifPickup : tarifViar;
      return tabel[key] || null;
    }

    function updateForm() {
      const hasil = document.getElementById("hasil");
      hasil.style.display = "none";
      hasil.innerHTML = "";
    }

    function hitung() {
      const armada = document.getElementById("armada").value;
      const jenis  = document.getElementById("jenis").value;
      const jemput = document.getElementById("jemput").value;
      const tujuan = document.getElementById("tujuan").value;
      const crew   = parseInt(document.getElementById("crew").value || "0", 10);

      const loading = document.getElementById("loading");
      const hasil   = document.getElementById("hasil");

      hasil.style.display = "none";
      hasil.innerHTML = "";
      loading.style.display = "block";

      setTimeout(() => {
        loading.style.display = "none";

        // Validasi dasar
        if (!armada || !jenis || !jemput || !tujuan) {
          hasil.innerHTML = `
            <div class="error-box">
              <div class="error-icon">‚ö†Ô∏è</div>
              <h3>Data Belum Lengkap</h3>
              <p>Silakan pilih <strong>Armada</strong>, <strong>Jenis Angkutan</strong>, <strong>Titik Jemput</strong> dan <strong>Tujuan</strong> terlebih dahulu.</p>
              <p>Jika masih ragu, Anda bisa langsung konsultasi via WhatsApp.</p>
              <div class="actions-inline">
                <button class="btn-wa" onclick="openModal()">
                  <span style="position:relative;z-index:1">üí¨ Isi Data & Konsultasi WA</span>
                </button>
              </div>
            </div>
          `;
          hasil.style.display = "block";
          return;
        }

        let tarif;
        if (jemput === tujuan) {
          // Untuk rute dalam kota, pakai tarif tembilahan-tembilahan
          const tabel = armada === "pickup" ? tarifPickup : tarifViar;
          tarif = tabel["tembilahan-tembilahan"];
        } else {
          tarif = getTarif(armada, jemput, tujuan);
        }

        if (!tarif) {
          hasil.innerHTML = `
            <div class="error-box">
              <div class="error-icon">üó∫Ô∏è</div>
              <h3>Rute Belum Tersedia Otomatis</h3>
              <p>Untuk rute <strong>${lokasiLabel[jemput] || jemput}</strong> ke <strong>${lokasiLabel[tujuan] || tujuan}</strong> belum tersedia di sistem.</p>
              <p>Tenang, Anda tetap bisa menanyakan harga dengan mengirim data rute ke admin kami.</p>
              <div class="actions-inline">
                <button class="btn-wa" onclick="openModal()">
                  <span style="position:relative;z-index:1">üí¨ Kirim Rute ke WhatsApp</span>
                </button>
              </div>
            </div>
          `;
          hasil.style.display = "block";
          return;
        }

        const minBase = tarif.min;
        const maxBase = tarif.max;

        const minTotal = minBase + crew;
        const maxTotal = maxBase + crew;

        lastCalculation = {
          armada,
          jenis,
          jemput,
          tujuan,
          crew,
          minBase,
          maxBase,
          minTotal,
          maxTotal
        };

        const labelArmada = armada === "pickup" ? "Pickup" : "Viar Roda 3";
        const labelJenis = jenis === "pindahan" ? "Pindahan Rumah/Kos" : "Pengiriman Barang";

        hasil.innerHTML = `
          <div class="breakdown">
            <strong>Perkiraan Biaya Angkutan</strong>
          </div>

          <div class="info-box">
            <div><strong>Armada:</strong> ${labelArmada}</div>
            <div><strong>Jenis Angkutan:</strong> ${labelJenis}</div>
            <div><strong>Rute:</strong> ${lokasiLabel[jemput] || jemput} ‚ûù ${lokasiLabel[tujuan] || tujuan}</div>
          </div>

          <div class="price-range">
            <div class="price-range-header">
              <span class="price-range-label">Perkiraan total biaya angkut</span>
              <span class="badge">Range Harga</span>
            </div>
            <div class="price-main">
              ${formatRupiah(minTotal)} - ${formatRupiah(maxTotal)}
            </div>
            <div class="price-note">
              Range harga ini sudah termasuk pertimbangan jenis barang dan kondisi akses jalan. 
              Harga final akan dikonfirmasi kembali oleh admin melalui WhatsApp.
            </div>
          </div>

          <ul class="list">
            <li>
              <span>Biaya Armada (perkiraan)</span>
              <span><strong>${formatRupiah(minBase)} - ${formatRupiah(maxBase)}</strong></span>
            </li>
            <li>
              <span>Tenaga Muat & Bongkar</span>
              <span><strong>${crew > 0 ? formatRupiah(crew) : "Muat bongkar sendiri"}</strong></span>
            </li>
          </ul>

          <div class="actions-inline">
            <div class="estimate-time">
              ‚è±Ô∏è Estimasi | Konfirmasi harga final via WhatsApp
            </div>
            <button class="btn-wa" onclick="openModal()">
              <span style="position:relative;z-index:1">üì≤ Lanjutkan Booking & Kirim ke WhatsApp</span>
            </button>
          </div>
        `;

        hasil.style.display = "block";
      }, 500);
    }

    function openModal() {
      const modal = document.getElementById("orderModal");
      const summary = document.getElementById("modalSummary");

      if (lastCalculation) {
        const { armada, jenis, jemput, tujuan, crew, minTotal, maxTotal } = lastCalculation;
        const labelArmada = armada === "pickup" ? "Pickup" : "Viar Roda 3";
        const labelJenis = jenis === "pindahan" ? "Pindahan Rumah/Kos" : "Pengiriman Barang";

        summary.innerHTML = `
          <div class="order-summary-title">Ringkasan Pesanan</div>
          <div class="order-summary-item">
            <span>Armada</span>
            <strong>${labelArmada}</strong>
          </div>
          <div class="order-summary-item">
            <span>Jenis Angkutan</span>
            <strong>${labelJenis}</strong>
          </div>
          <div class="order-summary-item">
            <span>Rute</span>
            <strong>${lokasiLabel[jemput] || jemput} ‚ûù ${lokasiLabel[tujuan] || tujuan}</strong>
          </div>
          <div class="order-summary-item">
            <span>Tenaga Muat & Bongkar</span>
            <strong>${crew > 0 ? formatRupiah(crew) : "Muat bongkar sendiri"}</strong>
          </div>
          <div class="order-summary-item">
            <span>Perkiraan Total</span>
            <strong>${formatRupiah(minTotal)} - ${formatRupiah(maxTotal)}</strong>
          </div>
        `;
      } else {
        summary.innerHTML = `
          <div class="order-summary-title">Ringkasan Pesanan</div>
          <div class="order-summary-item">
            <span>Perkiraan biaya akan dihitung ulang oleh admin berdasarkan data yang Anda kirim.</span>
          </div>
        `;
      }

      modal.classList.add("active");
    }

    function closeModal() {
      const modal = document.getElementById("orderModal");
      modal.classList.remove("active");
    }

    function sendToWA() {
      const nama    = document.getElementById("namaPemesan").value.trim();
      const nohp    = document.getElementById("nohpPemesan").value.trim();
      const alamatJ = document.getElementById("alamatJemput").value.trim();
      const alamatT = document.getElementById("alamatTujuan").value.trim();
      const tgl     = document.getElementById("tanggalJemput").value.trim();
      const catatan = document.getElementById("catatanTambahan").value.trim();

      if (!nama || !nohp || !alamatJ || !alamatT || !tgl) {
        alert("Mohon lengkapi semua data wajib (nama, nomor HP, alamat jemput & tujuan, serta tanggal jemput).");
        return;
      }

      let teks = "Halo INHILCARGO,%0A%0ASaya ingin melakukan pemesanan jasa angkutan.%0A%0A";

      if (lastCalculation) {
        const { armada, jenis, jemput, tujuan, crew, minTotal, maxTotal } = lastCalculation;
        const labelArmada = armada === "pickup" ? "Pickup" : "Viar Roda 3";
        const labelJenis = jenis === "pindahan" ? "Pindahan Rumah/Kos" : "Pengiriman Barang";

        teks += `Detail pesanan:%0A`;
        teks += `- Armada: ${labelArmada}%0A`;
        teks += `- Jenis angkutan: ${labelJenis}%0A`;
        teks += `- Rute: ${lokasiLabel[jemput] || jemput} ‚ûù ${lokasiLabel[tujuan] || tujuan}%0A`;
        teks += `- Tenaga muat & bongkar: ${crew > 0 ? formatRupiah(crew) : "Muat bongkar sendiri"}%0A`;
        teks += `- Perkiraan total: ${formatRupiah(minTotal)} - ${formatRupiah(maxTotal)}%0A%0A`;
      }

      teks += `Data pemesan:%0A`;
      teks += `- Nama: ${nama}%0A`;
      teks += `- Nomor HP/WA: ${nohp}%0A`;
      teks += `- Alamat jemput: ${alamatJ}%0A`;
      teks += `- Alamat tujuan: ${alamatT}%0A`;
      teks += `- Tanggal & jam jemput: ${tgl}%0A`;

      if (catatan) {
        teks += `%0ACatatan tambahan:%0A${catatan}%0A`;
      }

      teks += `%0AMohon dibantu konfirmasi ketersediaan armada dan harga finalnya. Terima kasih.`;

      // Ganti dengan nomor WhatsApp admin (format internasional, tanpa +)
      const nomorAdmin = "6281234567890";
      const url = `https://wa.me/${nomorAdmin}?text=${teks}`;

      window.open(url, "_blank");
    }
  </script>
</body>
</html>

